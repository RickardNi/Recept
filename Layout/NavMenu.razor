<header class="site-header" role="banner">
    <div class="wrapper">
        <a class="site-title" rel="author" href="./">Recept</a>

        <nav class="site-nav @(isMenuOpen ? "menu-open" : string.Empty)">
            <button type="button"
                    class="nav-toggle"
                    aria-expanded="@isMenuOpen"
                    aria-controls="site-nav-trigger"
                    aria-label="Öppna meny"
                    @onclick="ToggleMenu">
                <span class="menu-icon" aria-hidden="true">
                    <svg viewBox="0 0 18 15" width="18px" height="15px">
                        <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484
                            C0,0.665,0.665,0,1.484,0h15.032C17.335,0,18,0.665,18,1.484z
                            M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516
                            C0,6.696,0.665,6.031,1.484,6.031h15.032C17.335,6.031,18,6.696,18,7.516z
                            M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516
                            C0,12.695,0.665,12.031,1.484,12.031h15.032C17.335,12.031,18,12.696,18,13.516z" />
                    </svg>
                </span>
            </button>

            @if (isMenuOpen)
            {
                <button type="button" class="menu-backdrop" aria-label="Stäng meny" @onclick="CloseMenu"></button>
            }

            <div id="site-nav-trigger" class="trigger @(isMenuOpen ? "is-open" : string.Empty)">
                <form class="nav-search-form" action="search" method="get" role="search" @onsubmit="CloseMenu">
                    <input class="nav-search-input" type="search" name="query" placeholder="Sök recept..." aria-label="Sök recept" />
                    <button class="nav-search-submit" type="submit" aria-label="Sök">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
                    </button>
                </form>
                <a class="page-link" href="recipes" @onclick="CloseMenu">Alla recept</a>
                <a class="page-link" href="recipes/favorites" @onclick="CloseMenu">Favoriter</a>
                <a class="page-link" href="categories" @onclick="CloseMenu">Kategorier</a>
                <a class="page-link" href="ingredients" @onclick="CloseMenu">Ingredienser</a>
            </div>
        </nav>
    </div>
</header>

@code {
    private bool isMenuOpen;

    private void ToggleMenu()
    {
        isMenuOpen = !isMenuOpen;
    }

    private void CloseMenu()
    {
        isMenuOpen = false;
    }
}
